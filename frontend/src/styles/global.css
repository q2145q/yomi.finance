:root {
  --color-bg: #0f1117;
  --color-surface: #1a1d27;
  --color-surface-2: #232636;
  --color-border: #2e3148;
  --color-text: #e8eaf0;
  --color-text-muted: #7b7f99;
  --color-primary: #6c8cff;
  --color-primary-hover: #8aa3ff;
  --color-success: #4caf78;
  --color-warning: #f0a742;
  --color-danger: #e05c5c;

  /* Шрифты */
  --font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
  --font-sans: 'Inter', system-ui, sans-serif;
  font-family: var(--font-sans);
  font-size: 14px;
  line-height: 1.5;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body, #root {
  height: 100%;
  background: var(--color-bg);
  color: var(--color-text);
}

a {
  color: var(--color-primary);
  text-decoration: none;
}

button {
  cursor: pointer;
  font-family: inherit;
}

input, select, textarea {
  font-family: inherit;
  font-size: inherit;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: var(--color-surface);
}
::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 3px;
}

/* Утилиты */
.text-muted { color: var(--color-text-muted); }
.text-success { color: var(--color-success); }
.text-warning { color: var(--color-warning); }
.text-danger { color: var(--color-danger); }
.text-right { text-align: right; }
.text-mono { font-family: var(--font-mono); }

/* Кнопки */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  border-radius: 6px;
  border: 1px solid transparent;
  font-size: 13px;
  font-weight: 500;
  transition: all 0.15s;
  white-space: nowrap;
}
.btn-primary {
  background: var(--color-primary);
  color: #fff;
}
.btn-primary:hover {
  background: var(--color-primary-hover);
}
.btn-secondary {
  background: var(--color-surface-2);
  border-color: var(--color-border);
  color: var(--color-text);
}
.btn-secondary:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
}
.btn-danger {
  background: var(--color-danger);
  color: #fff;
}
.btn-sm {
  padding: 4px 10px;
  font-size: 12px;
}

/* Поля ввода */
.input {
  width: 100%;
  padding: 8px 12px;
  background: var(--color-surface-2);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
  font-size: 14px;
  outline: none;
  transition: border-color 0.15s;
}
.input:focus {
  border-color: var(--color-primary);
}
.input::placeholder {
  color: var(--color-text-muted);
}

/* Карточки */
.card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 20px;
}

/* Handsontable переопределения */
.handsontable {
  font-family: var(--font-sans) !important;
  font-size: 13px !important;
  color: var(--color-text) !important;
}
.handsontable td, .handsontable th {
  border-color: var(--color-border) !important;
  background: var(--color-surface) !important;
  color: var(--color-text) !important;
}
.handsontable th {
  background: var(--color-surface-2) !important;
  font-weight: 600 !important;
  letter-spacing: 0.02em !important;
  font-size: 12px !important;
  text-transform: uppercase !important;
  color: var(--color-text-muted) !important;
}

/* ─── Разделы (level 0) — синяя тема ─── */
.handsontable .row-category td {
  background: #16213e !important;
  color: #a8c1ff !important;
  font-weight: 700 !important;
  font-size: 13px !important;
  letter-spacing: 0.03em !important;
  border-top: 2px solid #2e3f7a !important;
  border-bottom: 1px solid #2e3f7a !important;
}
.handsontable .row-category td:first-child {
  border-left: 4px solid #6c8cff !important;
  padding-left: 4px !important;
}
/* Числовые ячейки разделов — скрыть значения и интерактивность */
.handsontable .row-category td:not(:first-child) {
  color: #16213e !important;
  cursor: default !important;
}
/* Скрыть стрелки дропдаунов в разделах */
.handsontable .row-category td .htAutocompleteArrow {
  display: none !important;
}

/* ─── Подразделы (level 1) — тёмно-бирюзовая тема ─── */
.handsontable .row-subcategory td {
  background: #152630 !important;
  color: #7ecfb0 !important;
  font-weight: 600 !important;
  font-size: 12.5px !important;
  border-bottom: 1px solid #1e3a42 !important;
}
.handsontable .row-subcategory td:first-child {
  border-left: 3px solid #4caf78 !important;
}
/* Числовые ячейки подразделов — скрыть значения и интерактивность */
.handsontable .row-subcategory td:not(:first-child) {
  color: #152630 !important;
  cursor: default !important;
}
/* Скрыть стрелки дропдаунов в подразделах */
.handsontable .row-subcategory td .htAutocompleteArrow {
  display: none !important;
}

/* ─── Статьи — обычный стиль ─── */
.handsontable tr:not(.row-category):not(.row-subcategory) td {
  background: var(--color-surface) !important;
}

/* ─── Выбранная строка ─── */
.handsontable tr.currentRow td {
  background: #1e2340 !important;
  filter: brightness(1.1) !important;
}
.handsontable .row-category.currentRow td {
  background: #1c2d5e !important;
  filter: none !important;
}
.handsontable .row-subcategory.currentRow td {
  background: #1b3640 !important;
  filter: none !important;
}
.handsontable td.current {
  background: #1e2340 !important;
  outline: 2px solid var(--color-primary) !important;
  outline-offset: -2px !important;
}
.handsontable .htAutocomplete {
  background: var(--color-surface-2) !important;
}

/* ─── Неактивные ячейки дат (unit != мес) ─── */
.handsontable td.date-disabled {
  background: #111318 !important;
  color: #2a2d3f !important;
  cursor: not-allowed !important;
}

/* ─── Активные ячейки дат (unit = мес) ─── */
.handsontable td.date-active {
  background: rgba(108, 140, 255, 0.07) !important;
  color: var(--color-text) !important;
}
.handsontable td.date-active.current {
  background: rgba(108, 140, 255, 0.18) !important;
}

/* ─── Pikaday date picker тёмная тема ─── */
.pika-single {
  font-family: var(--font-sans) !important;
  font-size: 13px !important;
  background: #1a1d27 !important;
  border: 1px solid #2e3148 !important;
  border-radius: 8px !important;
  color: #e8eaf0 !important;
  box-shadow: 0 8px 24px rgba(0,0,0,0.5) !important;
}
.pika-title {
  background: #232636 !important;
  border-radius: 8px 8px 0 0 !important;
}
.pika-label {
  color: #e8eaf0 !important;
  background: transparent !important;
}
.pika-prev, .pika-next {
  opacity: 0.7 !important;
}
.pika-prev:hover, .pika-next:hover {
  opacity: 1 !important;
}
.pika-table th {
  color: #7b7f99 !important;
  font-size: 11px !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
}
.pika-table td {
  color: #e8eaf0 !important;
}
.pika-button {
  background: transparent !important;
  color: #e8eaf0 !important;
  border-radius: 4px !important;
}
.pika-button:hover {
  background: #2e3148 !important;
  color: #a8c1ff !important;
}
.is-selected .pika-button {
  background: #6c8cff !important;
  color: #fff !important;
  box-shadow: none !important;
}
.is-today .pika-button {
  color: #6c8cff !important;
  font-weight: 700 !important;
}
.is-disabled .pika-button {
  color: #3a3d55 !important;
  cursor: not-allowed !important;
}
